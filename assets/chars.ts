import _ from 'lodash'

type CharList = { [year: string]: string }
type Chars = { [country: string]: CharList }

type SortedList = { year: string; ch: string; y: number }[]
type SortedChar = { [country: string]: SortedList }

const tc: Chars = {
  jp: {
    2022: '戰',
    2021: '金',
    2020: '密',
    2019: '令',
    2018: '災',
    2017: '北',
    2016: '金',
    2015: '安',
    2014: '税',
    2013: '輪',
    2012: '金',
    2011: '絆',
    2010: '署',
    2009: '新',
    2008: '變',
    2007: '偽',
    2006: '命',
    2005: '愛',
    2004: '災',
    2003: '虎',
    2002: '歸',
    2001: '戰',
    2000: '金',
    1999: '末',
    1998: '毒',
    1997: '倒',
    1996: '食',
    1995: '震',
  },
  int: {
    2022: '戰',
    2021: '疫',
    2020: '疫',
    2019: '難',
    2018: '退',
    2017: '智',
    2016: '變',
    2015: '恐',
    2014: '失',
    2013: '爭',
    2012: '衡',
    2011: '債',
    2010: '亂',
    2009: '浮',
    2008: '爭',
    2007: '油',
    2006: '亂',
  },
  cn: {
    2022: '穩',
    2021: '治',
    2020: '民',
    2019: '穩',
    2018: '奮',
    2017: '享',
    2016: '規',
    2015: '廉',
    2014: '法',
    2013: '房',
    2012: '夢',
    2011: '控',
    2010: '漲',
    2009: '被',
    2008: '和',
    2007: '漲',
    2006: '炒',
  },
  tw: {
    2022: '漲',
    2021: '宅',
    2020: '疫',
    2019: '亂',
    2018: '翻',
    2017: '茫',
    2016: '苦',
    2015: '換',
    2014: '黑',
    2013: '假',
    2012: '憂',
    2011: '贊',
    2010: '淡',
    2009: '盼',
    2008: '亂',
  },
  cs: {
    2022: '思',
    2021: '難',
    2020: '悶',
    2019: '困',
    2018: '望',
    2017: '創',
    2016: '變',
    2015: '和',
    2014: '轉',
    2013: '進',
    2012: '平',
    2011: '微',
    2010: '漲',
    2009: '生',
    2008: '震',
  },
  aw: {
    2022: '爆',
    2021: '穩',
    2020: '罩',
    2019: '破',
    2018: '移',
    2017: '智',
    2016: '轉',
    2015: '霾',
    2014: '佔',
    2013: '逼',
    2012: '驚',
    2011: '變',
    2010: '火',
    2009: '起',
  },
  my: {
    2022: '漲',
    2021: '盼',
    2020: '疫',
    2019: '騙',
    2018: '變',
    2017: '路',
    2016: '貪',
    2015: '苦',
    2014: '航',
    2013: '漲',
    2012: '改',
    2011: '轉',
  },
  sg: {
    2022: '漲',
    2021: '盼',
    2020: '罩',
    2019: '港',
    2018: '馬',
    2017: '恐',
    2016: '變',
    2015: '耀',
    2014: '亂',
    2013: '霾',
    2012: '色',
    2011: '漲',
  },
  mo: {
    2022: '疫',
    2021: '黨',
    2020: '疫',
    2019: '慶',
    2018: '粉',
    2017: '官',
    2016: '地',
    2015: '跌',
    2014: '改',
    2013: '爆',
    2012: '貴',
  },
  hk: {
    2022: '通',
    2021: '疫',
    2020: '安',
    2018: '順',
    2017: '貴',
    2016: '亂',
    2015: '法',
    2014: '融',
    2013: '和',
  },
  us: {
    2022: '滅',
    2021: '漲',
    2020: '抗',
    2019: '亂',
    2018: '戰',
    2017: '狂',
  },
  fr: {
    2022: '盼',
    2021: '熬',
    2020: '捨',
    2019: '亂',
    2018: '變',
  },
}

const sc: Chars = {
  jp: {
    2022: '战',
    2021: '金',
    2020: '密',
    2019: '令',
    2018: '灾',
    2017: '北',
    2016: '金',
    2015: '安',
    2014: '税',
    2013: '轮',
    2012: '金',
    2011: '绊',
    2010: '署',
    2009: '新',
    2008: '变',
    2007: '伪',
    2006: '命',
    2005: '爱',
    2004: '灾',
    2003: '虎',
    2002: '归',
    2001: '战',
    2000: '金',
    1999: '末',
    1998: '毒',
    1997: '倒',
    1996: '食',
    1995: '震',
  },
  int: {
    2022: '战',
    2021: '疫',
    2020: '疫',
    2019: '难',
    2018: '退',
    2017: '智',
    2016: '变',
    2015: '恐',
    2014: '失',
    2013: '争',
    2012: '衡',
    2011: '债',
    2010: '乱',
    2009: '浮',
    2008: '争',
    2007: '油',
    2006: '乱',
  },
  cn: {
    2022: '稳',
    2021: '治',
    2020: '民',
    2019: '稳',
    2018: '奋',
    2017: '享',
    2016: '规',
    2015: '廉',
    2014: '法',
    2013: '房',
    2012: '梦',
    2011: '控',
    2010: '涨',
    2009: '被',
    2008: '和',
    2007: '涨',
    2006: '炒',
  },
  tw: {
    2022: '涨',
    2021: '宅',
    2020: '疫',
    2019: '乱',
    2018: '翻',
    2017: '茫',
    2016: '苦',
    2015: '换',
    2014: '黑',
    2013: '假',
    2012: '忧',
    2011: '赞',
    2010: '淡',
    2009: '盼',
    2008: '乱',
  },
  cs: {
    2022: '思',
    2021: '难',
    2020: '闷',
    2019: '困',
    2018: '望',
    2017: '创',
    2016: '变',
    2015: '和',
    2014: '转',
    2013: '进',
    2012: '平',
    2011: '微',
    2010: '涨',
    2009: '生',
    2008: '震',
  },
  aw: {
    2022: '爆',
    2021: '稳',
    2020: '罩',
    2019: '破',
    2018: '移',
    2017: '智',
    2016: '转',
    2015: '霾',
    2014: '占',
    2013: '逼',
    2012: '惊',
    2011: '变',
    2010: '火',
    2009: '起',
  },
  my: {
    2022: '涨',
    2021: '盼',
    2020: '疫',
    2019: '骗',
    2018: '变',
    2017: '路',
    2016: '贪',
    2015: '苦',
    2014: '航',
    2013: '涨',
    2012: '改',
    2011: '转',
  },
  sg: {
    2022: '涨',
    2021: '盼',
    2020: '罩',
    2019: '港',
    2018: '马',
    2017: '恐',
    2016: '变',
    2015: '耀',
    2014: '乱',
    2013: '霾',
    2012: '色',
    2011: '涨',
  },
  mo: {
    2022: '疫',
    2021: '党',
    2020: '疫',
    2019: '庆',
    2018: '粉',
    2017: '官',
    2016: '地',
    2015: '跌',
    2014: '改',
    2013: '爆',
    2012: '贵',
  },
  hk: {
    2022: '通',
    2021: '疫',
    2020: '安',
    2018: '顺',
    2017: '贵',
    2016: '乱',
    2015: '法',
    2014: '融',
    2013: '和',
  },
  us: {
    2022: '灭',
    2021: '涨',
    2020: '抗',
    2019: '乱',
    2018: '战',
    2017: '狂',
  },
  fr: {
    2022: '盼',
    2021: '熬',
    2020: '舍',
    2019: '乱',
    2018: '变',
  },
}

const meaning: Chars = {
  jp: {
    2022: 'Battle',
    2021: 'Gold',
    2020: 'Close contact',
    2019: 'Reiwa (令和)',
    2018: 'Disaster',
    2017: 'North',
    2016: 'Gold',
    2015: 'Safety',
    2014: 'Tax',
    2013: 'Round',
    2012: 'Gold',
    2011: 'Tangled',
    2010: 'Heatstroke',
    2009: 'New',
    2008: 'Change',
    2007: 'Fake',
    2006: 'Life and Fate',
    2005: 'Love',
    2004: 'Disaster',
    2003: 'Tiger (Baseball, Hanshin Tigers)',
    2002: 'Back',
    2001: 'War',
    2000: 'Gold',
    1999: 'End of century',
    1998: 'Poison',
    1997: 'Collapse',
    1996: 'Food',
    1995: 'Earthquake',
  },
  int: {
    2022: 'War',
    2021: 'Pandemic',
    2020: 'Pandemic',
    2019: 'Difficult',
    2018: 'Withdraw',
    2017: 'Wisdom',
    2016: 'Change',
    2015: 'Afraid',
    2014: 'Lose',
    2013: 'Fight',
    2012: 'Balance',
    2011: 'Debt',
    2010: 'Messy',
    2009: 'Float',
    2008: 'Dispute',
    2007: 'Oil',
    2006: 'Chaos',
  },
  cn: {
    2022: 'Stabilize',
    2021: 'Governance',
    2020: 'Nationality',
    2019: 'Stabilize',
    2018: 'Fight',
    2017: 'Enjoy',
    2016: 'Regulation',
    2015: 'Integrity',
    2014: 'Law',
    2013: 'Real estate',
    2012: 'Dream',
    2011: 'Control',
    2010: 'Rise',
    2009: 'Cover',
    2008: 'Peace',
    2007: 'Rise',
    2006: 'Hype',
  },
  tw: {
    2022: 'Rise',
    2021: 'Stay Home',
    2020: 'Pandemic',
    2019: 'Mess',
    2018: 'Inverted',
    2017: 'The outlook is bleak',
    2016: 'Hardship',
    2015: 'Replace',
    2014: 'Dishonest',
    2013: 'False',
    2012: 'Worry',
    2011: 'Thumbs up',
    2010: 'Calm',
    2009: 'Look forward to',
    2008: 'Chaos',
  },
  cs: {
    2022: 'Think',
    2021: 'Difficult',
    2020: 'Depress',
    2019: 'Trapped',
    2018: 'Hope',
    2017: 'Create',
    2016: 'Change',
    2015: 'Harmony',
    2014: 'Turnaround',
    2013: 'Progress',
    2012: 'Flat',
    2011: 'Micro',
    2010: 'Inflation',
    2009: 'Birth',
    2008: 'Earthquake',
  },
  aw: {
    2022: 'Blew up',
    2021: 'Stable',
    2020: 'Mask',
    2019: 'Destroy',
    2018: 'Move',
    2017: 'Wisdom',
    2016: 'Shift',
    2015: 'Haze',
    2014: 'Occupy',
    2013: 'Force',
    2012: 'Shock',
    2011: 'Change',
    2010: 'Go viral',
    2009: 'Start',
  },
  my: {
    2022: 'Rise (cost of living)',
    2021: 'Look forward to',
    2020: 'Pandemic',
    2019: 'Cheat',
    2018: 'Change',
    2017: 'Avenue (China’s One belt, one road policy)',
    2016: 'Greedy',
    2015: 'Hardship',
    2014: 'Air crash (MH370 and MH-17)',
    2013: 'Rise',
    2012: 'Change',
    2011: 'Shift',
  },
  sg: {
    2022: 'Rise (cost of living)',
    2021: 'Look forward to',
    2020: 'Mask',
    2019: 'Hong Kong (Anti-Extradition Movement)',
    2018: 'Malaysia (election)',
    2017: 'Terrorism',
    2016: 'Change',
    2015: 'Yew (Former PM of Singapore, Lee, Kia Yew)',
    2014: 'Chaos',
    2013: 'Haze',
    2012: 'Intrigue',
    2011: 'Rise',
  },
  mo: {
    2022: 'Pandemic',
    2021: 'Ruling party',
    2020: 'Pandemic',
    2019: 'Celebrate',
    2018: 'Smash',
    2017: 'Government Officials',
    2016: 'Land',
    2015: 'Fall',
    2014: 'Change',
    2013: 'Burst',
    2012: 'Expensive',
  },
  hk: {
    2022: 'Through',
    2021: 'Pandemic',
    2020: 'Safe',
    2018: 'Smooth',
    2017: 'Expensive',
    2016: 'Chaos',
    2015: 'Law',
    2014: 'Fusion',
    2013: 'Harmony',
  },
  us: {
    2022: 'Gaslighting',
    2021: 'Rise',
    2020: 'Anti-Covid-19',
    2019: 'Chaos',
    2018: 'Battle',
    2017: 'Crazy',
  },
  fr: {
    2022: 'Look forward to',
    2021: 'Torment',
    2020: 'Wiling to give up',
    2019: 'Chaos',
    2018: 'Change',
  },
}

const sortedTc: SortedChar = {}
const sortedSc: SortedChar = {}

_.forEach(tc, (list, country) => sort(list, country, sortedTc))
_.forEach(sc, (list, country) => sort(list, country, sortedSc))

const chars = { tc, sc }
const sortedChars = { tc: sortedTc, sc: sortedSc }

export { chars, sortedChars, meaning }

function sort(list: CharList, country: string, target: SortedChar) {
  const arr = _.map(list, (ch, year) => ({ ch, year, y: Number(year) }))
  target[country] = _.orderBy(arr, ['y'], ['desc'])
}

export function parseCharUrl(url: string) {
  // http://localhost:3000/chars/tc/int/2006.svg
  const [country, name] = _.compact(_.split(url, '/')).slice(-2)
  const year = name.slice(0, 4)
  return [country, year] as const
}
